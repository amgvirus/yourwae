# Yourwae - Supabase Database Schema

## Tables

### users
- id (UUID, Primary Key)
- email (string, unique)
- phone (string, unique)
- first_name (string)
- last_name (string)
- password (handled by Supabase Auth)
- role (enum: customer, store, admin)
- avatar_url (string)
- created_at (timestamp)
- updated_at (timestamp)
- is_active (boolean)

### stores
- id (UUID, Primary Key)
- owner_id (UUID, Foreign Key to users)
- store_name (string)
- store_description (text)
- store_image (string)
- category (enum: grocery, electronics, pharmacy, fashion, beauty, home, food, other)
- address (json)
- phone (string)
- email (string)
- operating_hours (json)
- delivery_radius (number)
- base_delivery_fee (number)
- delivery_fee_per_km (number)
- minimum_order_value (number)
- rating (number)
- total_reviews (number)
- is_verified (boolean)
- is_active (boolean)
- bank_details (json)
- total_orders (number)
- total_revenue (number)
- created_at (timestamp)
- updated_at (timestamp)

### products
- id (UUID, Primary Key)
- store_id (UUID, Foreign Key to stores)
- name (string)
- description (text)
- price (number)
- original_price (number)
- discount (number)
- images (array of strings)
- category (string)
- stock (number)
- sku (string, unique)
- is_active (boolean)
- rating (number)
- total_reviews (number)
- tags (array)
- specifications (json)
- created_at (timestamp)
- updated_at (timestamp)

### orders
- id (UUID, Primary Key)
- order_number (string, unique)
- customer_id (UUID, Foreign Key to users)
- store_id (UUID, Foreign Key to stores)
- items (json array)
- subtotal (number)
- tax (number)
- delivery_fee (number)
- discount_applied (number)
- total_amount (number)
- delivery_address (json)
- status (enum: pending, confirmed, preparing, ready, out_for_delivery, delivered, cancelled)
- payment_status (enum: pending, completed, failed, refunded)
- payment_method (enum: card, wallet, upi, netbanking, cod)
- payment_id (string)
- special_instructions (text)
- estimated_delivery_time (timestamp)
- actual_delivery_time (timestamp)
- rating (number)
- review (text)
- created_at (timestamp)
- updated_at (timestamp)

### payments
- id (UUID, Primary Key)
- order_id (UUID, Foreign Key to orders)
- customer_id (UUID, Foreign Key to users)
- amount (number)
- currency (string)
- payment_method (enum: card, wallet, upi, netbanking, cod)
- transaction_id (string, unique)
- stripe_payment_intent_id (string)
- status (enum: pending, processing, completed, failed, refunded)
- refund_amount (number)
- refund_reason (text)
- metadata (json)
- created_at (timestamp)
- updated_at (timestamp)

### deliveries
- id (UUID, Primary Key)
- order_id (UUID, Foreign Key to orders)
- delivery_partner_id (UUID, Foreign Key to users)
- pickup_location (json)
- delivery_location (json)
- distance (number)
- delivery_fee (number)
- status (enum: assigned, picked_up, in_transit, delivered, cancelled)
- estimated_delivery_time (timestamp)
- actual_delivery_time (timestamp)
- pickup_time (timestamp)
- delivery_time (timestamp)
- otp (string)
- otp_verified (boolean)
- tracking_updates (json array)
- rating (number)
- feedback (text)
- created_at (timestamp)
- updated_at (timestamp)

### addresses
- id (UUID, Primary Key)
- user_id (UUID, Foreign Key to users)
- type (enum: home, work, other)
- street (string)
- city (string)
- state (string)
- zip_code (string)
- country (string)
- latitude (number)
- longitude (number)
- is_default (boolean)
- created_at (timestamp)

### wallets
- id (UUID, Primary Key)
- user_id (UUID, Foreign Key to users)
- balance (number)
- created_at (timestamp)
- updated_at (timestamp)

### wallet_transactions
- id (UUID, Primary Key)
- wallet_id (UUID, Foreign Key to wallets)
- amount (number)
- type (enum: credit, debit)
- description (text)
- created_at (timestamp)

### reviews
- id (UUID, Primary Key)
- user_id (UUID, Foreign Key to users)
- product_id (UUID, Foreign Key to products)
- order_id (UUID, Foreign Key to orders)
- rating (number)
- title (string)
- content (text)
- created_at (timestamp)

### cart_items
- id (UUID, Primary Key)
- user_id (UUID, Foreign Key to users)
- product_id (UUID, Foreign Key to products)
- quantity (number)
- created_at (timestamp)
- updated_at (timestamp)
